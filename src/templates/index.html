<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Debt Payoff Planner - Pay Off Debt Faster!</title>
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css')}}">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>

<body class="bg-gradient-to-br from-red-50 to-orange-50 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple Components
        const Card = ({ children, className = "" }) => (
            <div className={`bg-white rounded-lg shadow-md border border-gray-200 p-6 ${className}`}>
                {children}
            </div>
        );

        const Button = ({ children, onClick, disabled = false, className = "" }) => (
            <button 
                onClick={onClick} 
                disabled={disabled}
                className={`w-full py-3 px-4 rounded-lg font-medium text-white bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors ${className}`}
            >
                {children}
            </button>
        );

        const Input = ({ label, type = "text", value, onChange, placeholder, className = "" }) => (
            <div className="space-y-2">
                <label className="block text-sm font-medium text-gray-700">{label}</label>
                <input
                    type={type}
                    value={value}
                    onChange={onChange}
                    placeholder={placeholder}
                    className={`w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent ${className}`}
                />
            </div>
        );

        const Select = ({ label, value, onChange, options }) => (
            <div className="space-y-2">
                <label className="block text-sm font-medium text-gray-700">{label}</label>
                <select
                    value={value}
                    onChange={onChange}
                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                >
                    {options.map(option => (
                        <option key={option.value} value={option.value}>
                            {option.label}
                        </option>
                    ))}
                </select>
            </div>
        );

        // Step Components
        const Step1Income = ({ monthlyIncome, setMonthlyIncome, onNext }) => (
            <Card>
                <h2 className="text-2xl font-bold text-gray-900 mb-6 text-center">Step 1: How much money do you have to pay off debt?</h2>
                <div className="max-w-md mx-auto space-y-6">
                    <Input
                        label="Your Monthly Income (after taxes)"
                        type="number"
                        value={monthlyIncome}
                        onChange={(e) => setMonthlyIncome(e.target.value)}
                        placeholder="e.g., 5000"
                    />
                    <div className="text-sm text-gray-600 text-center">
                        💡 This is how much you can put toward debt each month
                    </div>
                    <Button onClick={onNext} disabled={!monthlyIncome}>
                        Next: Add My Debts
                    </Button>
                </div>
            </Card>
        );

        const Step2Debts = ({ debts, setDebts, onNext, onBack }) => {
            const [newDebt, setNewDebt] = useState({ 
                name: "", 
                current_balance: "", 
                interest_rate: "", 
                minimum_payment: "",
                priority: "medium"
            });

            const addDebt = () => {
                if (newDebt.name && newDebt.current_balance && newDebt.interest_rate && newDebt.minimum_payment) {
                    setDebts([...debts, { ...newDebt, id: Date.now() }]);
                    setNewDebt({ 
                        name: "", 
                        current_balance: "", 
                        interest_rate: "", 
                        minimum_payment: "",
                        priority: "medium"
                    });
                }
            };

            const removeDebt = (id) => {
                setDebts(debts.filter(debt => debt.id !== id));
            };

            const totalDebt = debts.reduce((sum, debt) => sum + parseFloat(debt.current_balance || 0), 0);
            const totalMonthlyInterest = debts.reduce((sum, debt) => {
                const balance = parseFloat(debt.current_balance || 0);
                const rate = parseFloat(debt.interest_rate || 0);
                return sum + (balance * rate / 100 / 12);
            }, 0);

            return (
                <Card>
                    <h2 className="text-2xl font-bold text-gray-900 mb-6 text-center">Step 2: What debts do you have?</h2>
                    
                    <div className="max-w-4xl mx-auto space-y-6">
                        {/* Add New Debt */}
                        <div className="bg-gray-50 p-4 rounded-lg">
                            <h3 className="font-semibold mb-3">Add a new debt:</h3>
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3">
                                <Input
                                    label="Debt Name"
                                    value={newDebt.name}
                                    onChange={(e) => setNewDebt({...newDebt, name: e.target.value})}
                                    placeholder="e.g., Credit Card"
                                />
                                <Input
                                    label="Current Balance ($)"
                                    type="number"
                                    value={newDebt.current_balance}
                                    onChange={(e) => setNewDebt({...newDebt, current_balance: e.target.value})}
                                    placeholder="5000"
                                />
                                <Input
                                    label="Interest Rate (%)"
                                    type="number"
                                    value={newDebt.interest_rate}
                                    onChange={(e) => setNewDebt({...newDebt, interest_rate: e.target.value})}
                                    placeholder="18.99"
                                />
                                <Input
                                    label="Minimum Payment ($)"
                                    type="number"
                                    value={newDebt.minimum_payment}
                                    onChange={(e) => setNewDebt({...newDebt, minimum_payment: e.target.value})}
                                    placeholder="150"
                                />
                                <Select
                                    label="Priority"
                                    value={newDebt.priority}
                                    onChange={(e) => setNewDebt({...newDebt, priority: e.target.value})}
                                    options={[
                                        { value: "high", label: "🔥 High Priority" },
                                        { value: "medium", label: "⚡ Medium Priority" },
                                        { value: "low", label: "📌 Low Priority" }
                                    ]}
                                />
                            </div>
                            <Button onClick={addDebt} className="mt-3" disabled={!newDebt.name || !newDebt.current_balance || !newDebt.interest_rate || !newDebt.minimum_payment}>
                                Add This Debt
                            </Button>
                        </div>

                        {/* Current Debts */}
                        {debts.length > 0 && (
                            <div>
                                <h3 className="font-semibold mb-3">Your current debts:</h3>
                                <div className="space-y-2">
                                    {debts.map(debt => (
                                        <div key={debt.id} className="flex justify-between items-center bg-white p-3 rounded border">
                                            <div className="flex items-center space-x-3">
                                                <div>
                                                    <span className="font-medium">{debt.name}</span>
                                                    <span className={`ml-2 px-2 py-1 rounded text-xs ${
                                                        debt.priority === 'high' ? 'bg-red-100 text-red-800' :
                                                        debt.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' :
                                                        'bg-gray-100 text-gray-800'
                                                    }`}>
                                                        {debt.priority === 'high' ? '🔥 High' : 
                                                         debt.priority === 'medium' ? '⚡ Medium' : '📌 Low'}
                                                    </span>
                                                </div>
                                                <div className="text-sm text-gray-500">
                                                    ${debt.current_balance} @ {debt.interest_rate}%
                                                </div>
                                            </div>
                                            <div className="flex items-center space-x-2">
                                                <span className="text-sm text-gray-500">Min: ${debt.minimum_payment}</span>
                                                <button 
                                                    onClick={() => removeDebt(debt.id)}
                                                    className="text-red-500 hover:text-red-700"
                                                >
                                                    ✕
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                <div className="mt-3 p-3 bg-red-50 rounded">
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                                        <div>
                                            <div className="text-lg font-bold text-red-600">${totalDebt.toLocaleString()}</div>
                                            <div className="text-sm text-gray-600">Total Debt</div>
                                        </div>
                                        <div>
                                            <div className="text-lg font-bold text-orange-600">${totalMonthlyInterest.toFixed(2)}</div>
                                            <div className="text-sm text-gray-600">Monthly Interest</div>
                                        </div>
                                        <div>
                                            <div className="text-lg font-bold text-blue-600">
                                                ${debts.reduce((sum, debt) => sum + parseFloat(debt.minimum_payment || 0), 0).toLocaleString()}
                                            </div>
                                            <div className="text-sm text-gray-600">Total Min Payments</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        <div className="flex space-x-3">
                            <Button onClick={onBack} className="bg-gray-500 hover:bg-gray-600">
                                ← Back
                            </Button>
                            <Button onClick={onNext} disabled={debts.length === 0}>
                                Next: See My Payoff Plan
                            </Button>
                        </div>
                    </div>
                </Card>
            );
        };

        const Step3Results = ({ monthlyIncome, debts, onBack, onRestart }) => {
            const [results, setResults] = useState(null);
            const [loading, setLoading] = useState(true);
            const [activeTab, setActiveTab] = useState('plan');

            useEffect(() => {
                const calculatePlan = async () => {
                    try {
                        const response = await fetch("/allocate", {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({
                                monthly_income: parseFloat(monthlyIncome),
                                keep_in_checking: 0,
                                debts: debts,
                                strategy: "avalanche"
                            })
                        });
                        
                        const data = await response.json();
                        if (response.ok) {
                            setResults(data);
                        } else {
                            setResults({ error: data.error || "Something went wrong. Please try again." });
                        }
                    } catch (error) {
                        setResults({ error: "Something went wrong. Please try again." });
                    } finally {
                        setLoading(false);
                    }
                };

                calculatePlan();
            }, [monthlyIncome, debts]);

            if (loading) {
                return (
                    <Card>
                        <div className="text-center py-8">
                            <div className="text-2xl mb-4">🤔</div>
                            <h2 className="text-xl font-semibold mb-2">Creating your debt payoff plan...</h2>
                            <p className="text-gray-600">This will just take a moment!</p>
                        </div>
                    </Card>
                );
            }

            if (results.error) {
                return (
                    <Card>
                        <div className="text-center py-8">
                            <div className="text-2xl mb-4">⚠️</div>
                            <h2 className="text-xl font-semibold mb-2">Oops!</h2>
                            <p className="text-gray-600 mb-4">{results.error}</p>
                            <Button onClick={onRestart}>Start Over</Button>
                        </div>
                    </Card>
                );
            }

            const totalDebt = debts.reduce((sum, debt) => sum + parseFloat(debt.current_balance || 0), 0);
            const totalMinPayments = debts.reduce((sum, debt) => sum + parseFloat(debt.minimum_payment || 0), 0);
            const extraPayment = parseFloat(monthlyIncome) - totalMinPayments;

            return (
                <div className="space-y-6">
                    <Card>
                        <h2 className="text-2xl font-bold text-gray-900 mb-6 text-center">Your Smart Debt Payoff Plan</h2>
                        
                        {/* Tab Navigation */}
                        <div className="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                            <button
                                onClick={() => setActiveTab('plan')}
                                className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${
                                    activeTab === 'plan' ? 'bg-white text-red-600 shadow-sm' : 'text-gray-600 hover:text-gray-900'
                                }`}
                            >
                                📋 Payoff Plan
                            </button>
                            <button
                                onClick={() => setActiveTab('timeline')}
                                className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${
                                    activeTab === 'timeline' ? 'bg-white text-red-600 shadow-sm' : 'text-gray-600 hover:text-gray-900'
                                }`}
                            >
                                📅 Timeline
                            </button>
                            <button
                                onClick={() => setActiveTab('compare')}
                                className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${
                                    activeTab === 'compare' ? 'bg-white text-red-600 shadow-sm' : 'text-gray-600 hover:text-gray-900'
                                }`}
                            >
                                ⚖️ Compare Strategies
                            </button>
                        </div>

                        {/* Summary Cards */}
                        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div className="text-center p-4 bg-green-50 rounded-lg">
                                <div className="text-2xl font-bold text-green-600">${monthlyIncome.toLocaleString()}</div>
                                <div className="text-sm text-gray-600">Monthly Income</div>
                            </div>
                            <div className="text-center p-4 bg-red-50 rounded-lg">
                                <div className="text-2xl font-bold text-red-600">${totalDebt.toLocaleString()}</div>
                                <div className="text-sm text-gray-600">Total Debt</div>
                            </div>
                            <div className="text-center p-4 bg-blue-50 rounded-lg">
                                <div className="text-2xl font-bold text-blue-600">${totalMinPayments.toLocaleString()}</div>
                                <div className="text-sm text-gray-600">Min Payments</div>
                            </div>
                            <div className="text-center p-4 bg-purple-50 rounded-lg">
                                <div className="text-2xl font-bold text-purple-600">${extraPayment.toLocaleString()}</div>
                                <div className="text-sm text-gray-600">Extra for Debt</div>
                            </div>
                        </div>

                        {/* Tab Content */}
                        {activeTab === 'plan' && results.allocation && (
                            <div className="space-y-6">
                                <div className="bg-blue-50 p-4 rounded-lg">
                                    <h3 className="font-semibold mb-3">🎯 Your Payoff Strategy: Avalanche Method</h3>
                                    <p className="text-sm text-gray-700">
                                        Pay minimums on all debts, then put extra money toward the debt with the highest interest rate. 
                                        This saves you the most money in interest!
                                    </p>
                                </div>

                                <div>
                                    <h3 className="font-semibold mb-3">📋 Monthly Payment Plan:</h3>
                                    <div className="space-y-3">
                                        {results.allocation.map((debt, index) => (
                                            <div key={index} className="flex justify-between items-center bg-white p-3 rounded border">
                                                <div>
                                                    <span className="font-medium">{debt.name}</span>
                                                    <span className="text-sm text-gray-500 ml-2">
                                                        (${debt.current_balance} @ {debt.interest_rate}%)
                                                    </span>
                                                </div>
                                                <div className="text-right">
                                                    <div className="font-semibold">${debt.allocated}</div>
                                                    <div className="text-sm text-gray-500">
                                                        Min: ${debt.minimum_payment} + Extra: ${(debt.allocated - debt.minimum_payment).toFixed(2)}
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {results.total_interest_saved && (
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <h3 className="font-semibold mb-2">💰 Money You'll Save:</h3>
                                        <div className="text-2xl font-bold text-green-600">
                                            ${results.total_interest_saved.toLocaleString()} in interest!
                                        </div>
                                        <p className="text-sm text-gray-600 mt-1">
                                            Compared to making only minimum payments
                                        </p>
                                    </div>
                                )}
                            </div>
                        )}

                        {activeTab === 'timeline' && (
                            <div className="space-y-6">
                                <div className="bg-yellow-50 p-4 rounded-lg">
                                    <h3 className="font-semibold mb-3">📅 When Will You Be Debt Free?</h3>
                                    <p className="text-sm text-gray-700">
                                        This shows how long it will take to pay off all your debts with this plan.
                                    </p>
                                </div>

                                <div className="space-y-4">
                                    {results.timeline && results.timeline.map((month, index) => (
                                        <div key={index} className="bg-white p-4 rounded border">
                                            <div className="flex justify-between items-center mb-2">
                                                <h4 className="font-semibold">Month {month.month}</h4>
                                                <span className="text-sm text-gray-500">
                                                    ${month.total_remaining.toLocaleString()} remaining
                                                </span>
                                            </div>
                                            <div className="text-sm text-gray-600">
                                                {month.debts_paid_off.length > 0 && (
                                                    <div className="mb-2">
                                                        <span className="text-green-600 font-medium">✓ Paid off:</span> {month.debts_paid_off.join(', ')}
                                                    </div>
                                                )}
                                                <div className="text-sm">
                                                    Interest paid this month: ${month.interest_paid.toFixed(2)}
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {activeTab === 'compare' && (
                            <div className="space-y-8">
                                <div className="glass-card p-6">
                                    <h3 className="text-xl font-semibold text-white mb-4 flex items-center">
                                        <span className="text-2xl mr-3">⚖️</span>
                                        Why Paying All Debts Equally is a HUGE Mistake!
                                    </h3>
                                    <p className="text-white opacity-80">
                                        Your friend is throwing money away! See how smart strategies can save thousands and pay off debt years faster.
                                    </p>
                                </div>

                                {/* Equal Payment Strategy (The Bad One) */}
                                <div className="glass-card p-6 bg-gradient-to-r from-red-500 to-pink-500 bg-opacity-20 border-2 border-red-400">
                                    <div className="flex items-center justify-between mb-4">
                                        <h4 className="text-xl font-bold text-white flex items-center">
                                            <span className="text-2xl mr-3">❌</span>
                                            Equal Payment Strategy (BAD!)
                                        </h4>
                                        <span className="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold">AVOID THIS!</span>
                                    </div>
                                    <p className="text-white opacity-90 mb-4">
                                        <strong>What your friend is doing:</strong> Paying the same extra amount on all debts regardless of interest rates.
                                    </p>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                        <div className="bg-white bg-opacity-10 rounded-lg p-3">
                                            <div className="text-2xl font-bold text-red-400">${(results.strategy_comparison && results.strategy_comparison.equal_payment && results.strategy_comparison.equal_payment.total_interest || 0).toLocaleString()}</div>
                                            <div className="text-white opacity-70 text-sm">Total Interest (Wasted Money!)</div>
                                        </div>
                                        <div className="bg-white bg-opacity-10 rounded-lg p-3">
                                            <div className="text-2xl font-bold text-red-400">{results.strategy_comparison && results.strategy_comparison.equal_payment && results.strategy_comparison.equal_payment.months_to_payoff || 0} months</div>
                                            <div className="text-white opacity-70 text-sm">Years in Debt</div>
                                        </div>
                                        <div className="bg-white bg-opacity-10 rounded-lg p-3">
                                            <div className="text-2xl font-bold text-red-400">$0</div>
                                            <div className="text-white opacity-70 text-sm">Money Saved</div>
                                        </div>
                                    </div>
                                    <div className="bg-red-500 bg-opacity-20 rounded-lg p-4 border border-red-400">
                                        <h5 className="font-bold text-white mb-2">🚨 Why This is Terrible:</h5>
                                        <ul className="text-white opacity-90 text-sm space-y-1">
                                            <li>• High-interest debts keep growing faster than you can pay them</li>
                                            <li>• You're paying more interest than necessary</li>
                                            <li>• Takes YEARS longer to become debt-free</li>
                                            <li>• Wastes thousands of dollars in extra interest</li>
                                        </ul>
                                    </div>
                                </div>

                                {/* Best Strategies */}
                                <div className="glass-card p-6">
                                    <h4 className="text-xl font-semibold text-white mb-6 flex items-center">
                                        <span className="text-2xl mr-3">🏆</span>
                                        Smart Strategies (Choose These Instead!)
                                    </h4>
                                    
                                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                        {/* Avalanche Strategy */}
                                        <div className="debt-item bg-gradient-to-r from-green-500 to-emerald-500 bg-opacity-10 border-2 border-green-400">
                                            <div className="flex items-center justify-between mb-4">
                                                <h5 className="text-lg font-bold text-white flex items-center">
                                                    <span className="text-xl mr-2">🔥</span>
                                                    Avalanche Method
                                                </h5>
                                                <span className="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold">BEST FOR SAVINGS</span>
                                            </div>
                                            <p className="text-white opacity-80 mb-4 text-sm">
                                                Pay minimums on all debts, then put ALL extra money toward the highest interest debt first.
                                            </p>
                                            
                                            {results.strategy_comparison?.avalanche && (
                                                <div className="space-y-3 mb-4">
                                                    <div className="flex justify-between items-center">
                                                        <span className="text-white opacity-70">Total Interest:</span>
                                                        <span className="font-bold text-white">${results.strategy_comparison.avalanche.total_interest.toLocaleString()}</span>
                                                    </div>
                                                    <div className="flex justify-between items-center">
                                                        <span className="text-white opacity-70">Payoff Time:</span>
                                                        <span className="font-bold text-white">{results.strategy_comparison.avalanche.months_to_payoff} months</span>
                                                    </div>
                                                    <div className="flex justify-between items-center">
                                                        <span className="text-white opacity-70">Money Saved:</span>
                                                        <span className="font-bold text-green-400">${results.strategy_comparison.avalanche.interest_saved.toLocaleString()}</span>
                                                    </div>
                                                    <div className="flex justify-between items-center">
                                                        <span className="text-white opacity-70">Years Saved:</span>
                                                        <span className="font-bold text-green-400">
                                                            {Math.floor((results.strategy_comparison.equal_payment?.months_to_payoff || 0 - results.strategy_comparison.avalanche.months_to_payoff) / 12)} years
                                                        </span>
                                                    </div>
                                                </div>
                                            )}
                                            
                                            <div className="bg-green-500 bg-opacity-20 rounded-lg p-3 border border-green-400">
                                                <h6 className="font-bold text-white mb-2">✅ Why This is Amazing:</h6>
                                                <ul className="text-white opacity-90 text-xs space-y-1">
                                                    <li>• Saves the MOST money in interest</li>
                                                    <li>• Mathematically optimal approach</li>
                                                    <li>• Gets you debt-free fastest</li>
                                                    <li>• Perfect for high-interest credit cards</li>
                                                </ul>
                                            </div>
                                        </div>

                                        {/* Snowball Strategy */}
                                        <div className="debt-item bg-gradient-to-r from-blue-500 to-purple-500 bg-opacity-10 border-2 border-blue-400">
                                            <div className="flex items-center justify-between mb-4">
                                                <h5 className="text-lg font-bold text-white flex items-center">
                                                    <span className="text-xl mr-2">❄️</span>
                                                    Snowball Method
                                                </h5>
                                                <span className="bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-bold">BEST FOR MOTIVATION</span>
                                            </div>
                                            <p className="text-white opacity-80 mb-4 text-sm">
                                                Pay minimums on all debts, then put ALL extra money toward the smallest balance debt first.
                                            </p>
                                            
                                            {results.strategy_comparison?.snowball && (
                                                <div className="space-y-3 mb-4">
                                                    <div className="flex justify-between items-center">
                                                        <span className="text-white opacity-70">Total Interest:</span>
                                                        <span className="font-bold text-white">${results.strategy_comparison.snowball.total_interest.toLocaleString()}</span>
                                                    </div>
                                                    <div className="flex justify-between items-center">
                                                        <span className="text-white opacity-70">Payoff Time:</span>
                                                        <span className="font-bold text-white">{results.strategy_comparison.snowball.months_to_payoff} months</span>
                                                    </div>
                                                    <div className="flex justify-between items-center">
                                                        <span className="text-white opacity-70">Money Saved:</span>
                                                        <span className="font-bold text-green-400">${results.strategy_comparison.snowball.interest_saved.toLocaleString()}</span>
                                                    </div>
                                                    <div className="flex justify-between items-center">
                                                        <span className="text-white opacity-70">vs Equal Payment:</span>
                                                        <span className="font-bold text-green-400">
                                                            ${(results.strategy_comparison.equal_payment?.total_interest || 0 - results.strategy_comparison.snowball.total_interest).toLocaleString()} saved
                                                        </span>
                                                    </div>
                                                </div>
                                            )}
                                            
                                            <div className="bg-blue-500 bg-opacity-20 rounded-lg p-3 border border-blue-400">
                                                <h6 className="font-bold text-white mb-2">✅ Why This Works:</h6>
                                                <ul className="text-white opacity-90 text-xs space-y-1">
                                                    <li>• Quick wins keep you motivated</li>
                                                    <li>• Reduces number of payments faster</li>
                                                    <li>• Great for people who need encouragement</li>
                                                    <li>• Still saves money vs equal payments</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Additional Strategies */}
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                                        {/* Hybrid Strategy */}
                                        <div className="debt-item bg-gradient-to-r from-purple-500 to-pink-500 bg-opacity-10 border border-purple-400">
                                            <h5 className="text-lg font-bold text-white mb-3 flex items-center">
                                                <span className="text-xl mr-2">🎯</span>
                                                Hybrid Method
                                            </h5>
                                            <p className="text-white opacity-80 text-sm mb-3">
                                                Combine priority levels with interest rates for personalized strategy.
                                            </p>
                                            {results.strategy_comparison?.hybrid && (
                                                <div className="text-center">
                                                    <div className="text-xl font-bold text-white">${results.strategy_comparison.hybrid.interest_saved.toLocaleString()}</div>
                                                    <div className="text-white opacity-70 text-xs">Money Saved</div>
                                                </div>
                                            )}
                                        </div>

                                        {/* Due Date Strategy */}
                                        <div className="debt-item bg-gradient-to-r from-orange-500 to-red-500 bg-opacity-10 border border-orange-400">
                                            <h5 className="text-lg font-bold text-white mb-3 flex items-center">
                                                <span className="text-xl mr-2">📅</span>
                                                Due Date Method
                                            </h5>
                                            <p className="text-white opacity-80 text-sm mb-3">
                                                Pay debts due soonest first to avoid late fees.
                                            </p>
                                            {results.strategy_comparison?.due_date && (
                                                <div className="text-center">
                                                    <div className="text-xl font-bold text-white">${results.strategy_comparison.due_date.interest_saved.toLocaleString()}</div>
                                                    <div className="text-white opacity-70 text-xs">Money Saved</div>
                                                </div>
                                            )}
                                        </div>

                                        {/* Bonus Optimized */}
                                        <div className="debt-item bg-gradient-to-r from-yellow-500 to-orange-500 bg-opacity-10 border border-yellow-400">
                                            <h5 className="text-lg font-bold text-white mb-3 flex items-center">
                                                <span className="text-xl mr-2">💰</span>
                                                Bonus Optimized
                                            </h5>
                                            <p className="text-white opacity-80 text-sm mb-3">
                                                Prioritize debts with early payoff bonuses.
                                            </p>
                                            {results.strategy_comparison?.bonus_optimized && (
                                                <div className="text-center">
                                                    <div className="text-xl font-bold text-white">${results.strategy_comparison.bonus_optimized.interest_saved.toLocaleString()}</div>
                                                    <div className="text-white opacity-70 text-xs">Money Saved</div>
                                                </div>
                                            )}
                                        </div>
                                    </div>

                                    {/* Strategy Comparison Table */}
                                    <div className="mt-8">
                                        <h5 className="text-lg font-bold text-white mb-4 flex items-center">
                                            <span className="text-xl mr-2">📊</span>
                                            Strategy Comparison Summary
                                        </h5>
                                        <div className="overflow-x-auto">
                                            <table className="w-full text-white">
                                                <thead>
                                                    <tr className="border-b border-white border-opacity-20">
                                                        <th className="text-left py-3">Strategy</th>
                                                        <th className="text-center py-3">Total Interest</th>
                                                        <th className="text-center py-3">Payoff Time</th>
                                                        <th className="text-center py-3">Money Saved</th>
                                                        <th className="text-center py-3">Rating</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {results.strategy_comparison && Object.entries(results.strategy_comparison).map(([strategy, data]) => (
                                                        <tr key={strategy} className="border-b border-white border-opacity-10">
                                                            <td className="py-3">
                                                                <div className="flex items-center">
                                                                    <span className="text-lg mr-2">
                                                                        {strategy === 'avalanche' ? '🔥' :
                                                                         strategy === 'snowball' ? '❄️' :
                                                                         strategy === 'hybrid' ? '🎯' :
                                                                         strategy === 'due_date' ? '📅' :
                                                                         strategy === 'bonus_optimized' ? '💰' : '❌'}
                                                                    </span>
                                                                    <span className="font-semibold capitalize">
                                                                        {strategy === 'avalanche' ? 'Avalanche' :
                                                                         strategy === 'snowball' ? 'Snowball' :
                                                                         strategy === 'hybrid' ? 'Hybrid' :
                                                                         strategy === 'due_date' ? 'Due Date' :
                                                                         strategy === 'bonus_optimized' ? 'Bonus Optimized' : 'Equal Payment'}
                                                                    </span>
                                                                </div>
                                                            </td>
                                                            <td className="text-center py-3">${data.total_interest.toLocaleString()}</td>
                                                            <td className="text-center py-3">{data.months_to_payoff} months</td>
                                                            <td className="text-center py-3">
                                                                <span className="text-green-400 font-bold">${data.interest_saved.toLocaleString()}</span>
                                                            </td>
                                                            <td className="text-center py-3">
                                                                {strategy === 'avalanche' ? '⭐⭐⭐⭐⭐' :
                                                                 strategy === 'snowball' ? '⭐⭐⭐⭐' :
                                                                 strategy === 'hybrid' ? '⭐⭐⭐⭐' :
                                                                 strategy === 'due_date' ? '⭐⭐⭐' :
                                                                 strategy === 'bonus_optimized' ? '⭐⭐⭐' : '⭐'}
                                                            </td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    {/* Recommendation */}
                                    <div className="mt-8 glass-card p-6 bg-gradient-to-r from-green-500 to-emerald-500 bg-opacity-20 border-2 border-green-400">
                                        <h5 className="text-xl font-bold text-white mb-4 flex items-center">
                                            <span className="text-2xl mr-3">🏆</span>
                                            Our Recommendation
                                        </h5>
                                        <div className="text-white opacity-90 mb-4">
                                            <p className="mb-3">
                                                <strong>🔥 Use the Avalanche Method</strong> - It will save you the most money and get you debt-free fastest!
                                            </p>
                                            <p className="mb-3">
                                                <strong>❄️ Use Snowball Method</strong> - Only if you need the psychological boost of quick wins to stay motivated.
                                            </p>
                                            <p>
                                                <strong>❌ NEVER use Equal Payment</strong> - Your friend is literally throwing money away!
                                            </p>
                                        </div>
                                        <div className="bg-green-500 bg-opacity-20 rounded-lg p-4 border border-green-400">
                                            <h6 className="font-bold text-white mb-2">💡 Pro Tip:</h6>
                                            <p className="text-white opacity-90 text-sm">
                                                Show your friend this comparison! They could save ${Math.max(...Object.values(results.strategy_comparison || {}).map(s => s.interest_saved || 0)).toLocaleString()} 
                                                and pay off debt {Math.floor((Math.max(...Object.values(results.strategy_comparison || {}).map(s => s.months_to_payoff || 0)) - 
                                                Math.min(...Object.values(results.strategy_comparison || {}).map(s => s.months_to_payoff || 0))) / 12)} years faster!
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        <div className="flex space-x-3">
                            <Button onClick={onBack} className="bg-gray-500 hover:bg-gray-600">
                                ← Back to Debts
                            </Button>
                            <Button onClick={onRestart} className="bg-green-600 hover:bg-green-700">
                                Start Over
                            </Button>
                        </div>
                    </Card>
                </div>
            );
        };

        // Main App
        function App() {
            const [step, setStep] = useState(1);
            const [monthlyIncome, setMonthlyIncome] = useState("");
            const [debts, setDebts] = useState([]);

            const nextStep = () => setStep(step + 1);
            const prevStep = () => setStep(step - 1);
            const restart = () => {
                setStep(1);
                setMonthlyIncome("");
                setDebts([]);
            };

            return (
                <div className="container mx-auto px-4 py-8">
                    {/* Header */}
                    <div className="text-center mb-8">
                        <h1 className="text-4xl font-bold text-gray-900 mb-4">
                            💳 Smart Debt Payoff Planner
                        </h1>
                        <p className="text-lg text-gray-600 max-w-2xl mx-auto">
                            Pay off your debts faster and save thousands in interest with smart strategies
                        </p>
                    </div>

                    {/* Progress Bar */}
                    <div className="max-w-2xl mx-auto mb-8">
                        <div className="flex items-center justify-between">
                            <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${
                                step >= 1 ? 'bg-red-600 text-white' : 'bg-gray-200 text-gray-500'
                            }`}>1</div>
                            <div className={`flex-1 h-1 ${step >= 2 ? 'bg-red-600' : 'bg-gray-200'}`}></div>
                            <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${
                                step >= 2 ? 'bg-red-600 text-white' : 'bg-gray-200 text-gray-500'
                            }`}>2</div>
                            <div className={`flex-1 h-1 ${step >= 3 ? 'bg-red-600' : 'bg-gray-200'}`}></div>
                            <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${
                                step >= 3 ? 'bg-red-600 text-white' : 'bg-gray-200 text-gray-500'
                            }`}>3</div>
                        </div>
                        <div className="flex justify-between mt-2 text-sm text-gray-600">
                            <span>Income</span>
                            <span>Debts</span>
                            <span>Plan</span>
                        </div>
                    </div>

                    {/* Step Content */}
                    {step === 1 && <Step1Income monthlyIncome={monthlyIncome} setMonthlyIncome={setMonthlyIncome} onNext={nextStep} />}
                    {step === 2 && <Step2Debts debts={debts} setDebts={setDebts} onNext={nextStep} onBack={prevStep} />}
                    {step === 3 && <Step3Results monthlyIncome={monthlyIncome} debts={debts} onBack={prevStep} onRestart={restart} />}
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById("root"));
    </script>
</body>
</html>